# 工厂方法模式

“对象创建”模式，**绕开new**，来避免对象创建过程中导致的紧耦合，从而支持对象创建的稳定。是接口抽象之后的第一步工作。

Factory Method、 Abstract Factory、 Prototype、 Builder

* 动机

  在软件系统中，经常面临着创建对象的工作；由于需求的变化，需要创建的对象的具体类型经常变化。

  如何应对这种变化？如何绕过常规的对象创建方法（new），提供一种“封装机制”来避免客户程序和这种“具体对象创建工作”的紧耦合？

* 通过virtual绕过

* 定义

  定义一个用于创建对象的接口，让子类决定实例化哪一个类。Factory Method使得一个类的实例化延迟（目的：解耦，手段：虚函数）到子类

  ![image-20211129170323902](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20211129170323902.png)

* 用于隔离类对象的使用者和具体类型之间的耦合关系。
* 通过面向对象的手法，将创建具体对象延迟到子类，实现一种扩展



# 抽象工厂

abstract factory通过“对象创建”模式

* 动机

  一系列相互依赖的对象

  生产一组factory

* 定义

  提供一个接口，让该接口负责创建一系列“相关或者相互依赖的对象”，无需指定他们具体的类。

  ![image-20211129172327869](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20211129172327869.png)

  ![image-20211129172617169](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20211129172617169.png)

# 原型模式prototype

* 克隆原型得到新对象

* 动机

  某些结构复杂的对象

* 定义

  使用原型实例指定创建对象的种类，通过拷贝这些原型对象创建新对象。

  * 使用clone方法，注册一个新类的对象（原型），然后在任何需要的地方clone

  

  

# 构建器模式

* 动机

  有时候面临着“一个复杂对象”的创建工作，其通常由各个部分的子对象用一定的算法构成；由于需求的变化，这个复杂对象的各个部分经常面临着剧烈的变化，但是将他们组合在一起的算法却相对稳定。

  如何提供一种“封装机制”来隔离出“复杂对象的各个部分”的变化，从而保持系统中的“稳定构建算法”不随着需求改变而改变？

* 定义

  将对象的构建和表示相分离

* 结构

  ![image-20211129195721244](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20211129195721244.png)

* 注意，在builder模式中，要注意不同语言中构造器内调用虚函数的差别